var _="OneTrustGroupsUpdated",c={required:1,performance:2,functional:3,advertising:4},p="functional",y="advertising",l="OnetrustActiveGroups",g="sfdcConsent",J="OptanonConsent",T="onetrust-consent-sdk",m="OneTrust";var x=()=>!!globalThis[m]&&globalThis[m].GetDomainData,f=new Promise(t=>{x()&&t(!0);let o=0,e=setInterval(()=>{if(o++,o>=500){clearInterval(e),t(!1);return}x()&&(clearInterval(e),t(!0))},10)});var O=async()=>f.then(()=>globalThis[m]||{});var A=globalThis.document||{},E=t=>{let o={};try{let e=JSON.parse(t);return e||o}catch{return o}},h=(t="",o)=>{let e=A.cookie,n=`${t}=`;if(e.indexOf(n)<0)return"";let s=e.split("; ").find(a=>a.includes(n))||"";if(s=s.substring(n.length,s.length),!s||s===n)return"";typeof o=="function"&&(s=o(s)),s=decodeURIComponent(s);let i=E(s);return Object.keys(i).length?i:s};var N=()=>globalThis[l]||"1",u=t=>{let o=(t||N()).split(",").reduce((e,n)=>n?[...e,parseInt(n)]:e,[]);return o.includes(1)||o.push(1),o},X=async()=>{let t=globalThis[l];if(!t||!globalThis.document||!globalThis.location)return;let o=new Date;o.setTime(o.setFullYear(o.getFullYear()+1));let e=globalThis.location.host,n=[`${g}=${u(t).join(",")}`,"path=/",`domain=${e.endsWith("salesforce.com")?".salesforce.com":e}`,`expires=${o.toUTCString()}`];globalThis.document.cookie=n.join("; ")},b=t=>globalThis.addEventListener(_,t),d=(t,o)=>u(o).includes(c[t]||0),v=new Promise(t=>{let o=globalThis[l];if(o)return t(o);let e=h(g);e&&t(u(e)),b(()=>{globalThis[l]&&t(u(globalThis[l]))})});var eo=async()=>new Promise(t=>{let o=globalThis.document.querySelector(`#${T}`);if(o)return t(o);new MutationObserver((n,r)=>{let s=n.filter(i=>[...i.addedNodes].find(a=>a.id===T));s.length&&(r.disconnect(),t(s[0].target))}).observe(globalThis.document.body,{childList:!0,subtree:!0})}),no=async t=>!t||!c[t]?Promise.resolve(!1):(await v,d(t)?Promise.resolve(!0):new Promise(o=>b(()=>{d(t)&&o(!0)})));var w=globalThis.document||{},D=t=>(w.cookie||"").includes(t+"=");var C=new Promise(t=>O().then(o=>o.GetDomainData().Groups).then(o=>{t(o.reduce((e,n)=>(n.Cookies.length&&(e[n.OptanonGroupId]=n.Cookies.reduce((r,s)=>[...r,s.Name],[])),e),{}))}).catch(o=>{console.warn("Could not retrieve One Trust configs"),t({})})),U=async()=>{let t=u();return Object.entries(await C).reduce((o,[e,n])=>t.includes(parseInt(e))?[...o,...n]:o,[])},P=async t=>{let o=d(p),e=d(y);if(!e)return(await U()).includes(t);let n=`${c[p]}`,r=(await C)[n];return e&&!o?!r.includes(t):!0};var S=globalThis.document||{},k=globalThis.location||{},$=t=>{let o=new Date;return o.setTime(o.getTime()+t*1e3),o.toUTCString()},M=async(t,o,e,n,r)=>{await f.then(async()=>{if(!t||!await P(t))return;let s=[],i=o instanceof Object?JSON.stringify(o):o;typeof n=="function"&&(i=n(i));let a=new Map([[t,i],["path","/"],["domain",r||k.hostname]]);e&&e>0&&a.set("expires",$(e)),a.forEach((I,R)=>s.push(`${R}=${I}`)),(k.protocol||"").includes("s")&&s.push("secure"),S.cookie=s.join("; ")})};var F="Thu, 01 Jan 1970 00:00:00 GMT",G=globalThis.document||{},L=globalThis.location||{},j=async(t,o)=>{let e=`${t}= ; expires=${F}`;G.cookie=e,G.cookie=`${e}; domain=${o||L.hostname}`};export{y as OT_ADVERTISING,J as OT_COOKIE,p as OT_FUNCTIONAL,l as OT_GROUPS_PROP,c as OT_GROUP_MAP,m as OT_PROP_KEY,T as OT_UI_ID,_ as OT_UPDATE_EVENT,g as SFDC_CONSENT_COOKIE,j as deleteCookie,h as getCookie,O as getOneTrust,D as hasCookie,d as isActiveGroup,P as isCookieActive,v as onConsentReady,b as onConsentUpdate,f as onGdprReady,no as onGroupActive,C as otCookieMap,u as parseConsent,M as setCookie,X as updateConsent,eo as waitForOtUI};
//# sourceMappingURL=gdpr.js.map